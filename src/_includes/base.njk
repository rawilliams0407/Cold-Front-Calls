<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title or site.title }}</title>
  <meta name="description" content="{{ description or site.description }}">
  <meta name="keywords" content="duck calls, goose calls, waterfowl, hunting, custom calls, waterfowl calls">
  <meta name="theme-color" content="#0a1a2f">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:title" content="{{ title or site.title }}">
  <meta property="og:description" content="{{ description or site.description }}">
  <meta property="og:image" content="{{ site.url }}/assets/images/og-image.jpg">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Teko:wght@300;400;500;600;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/assets/css/style.css">
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body class="bg-obsidian text-platinum min-h-screen font-body overflow-x-hidden">
  {% include "navigation.njk" %}
  
  <main>
    {{ content | safe }}
  </main>
  
  {% include "cart-sidebar.njk" %}
  {% include "upsell-modal.njk" %}
  {% include "footer.njk" %}
  
  {% set duckUpsell = null %}
  {% set gooseUpsell = null %}
  
  {% for product in collections.products %}
    {% if product.fileSlug == site.upsells.duckProduct %}
      {% set duckUpsell = product %}
    {% endif %}
    {% if product.fileSlug == site.upsells.gooseProduct %}
      {% set gooseUpsell = product %}
    {% endif %}
  {% endfor %}

  <script>
    window.COLD_FRONT_SITE = {{ site | dump | safe if site else "{}" }};
    window.COLD_FRONT_UPSELLS = {
      duck: {% if duckUpsell %}{
        id: "{{ duckUpsell.fileSlug }}",
        name: "{{ duckUpsell.data.title }}",
        price: {{ duckUpsell.data.price }},
        image: "{{ duckUpsell.data.image }}",
        category: "Duck"
      }{% else %}null{% endif %},
      goose: {% if gooseUpsell %}{
        id: "{{ gooseUpsell.fileSlug }}",
        name: "{{ gooseUpsell.data.title }}",
        price: {{ gooseUpsell.data.price }},
        image: "{{ gooseUpsell.data.image }}",
        category: "Goose"
      }{% else %}null{% endif %}
    };
  </script>
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/cart.js"></script>
  {% if page.url == '/shop/' %}
  <script src="/assets/js/shop-filters.js"></script>
  {% endif %}
  {{ extra_scripts | safe }}
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>
</html>
